server.port=9090
spring.profiles.active=${SPRING_PROFILES_ACTIVE:prod}

# HikariCP Connection Pool Configuration
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.connection-test-query=SELECT 1

# Cache / Redis
spring.cache.type=redis
spring.cache.redis.time-to-live=600000
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
app.caching.enabled=${APP_CACHING_ENABLED:true}

# JWT Configuration
# JWT_SECRET environment variable is REQUIRED - must be at least 32 characters for HS512
app.jwt.secret=${JWT_SECRET:}
app.jwt.access-token-validity=900
app.jwt.refresh-token-validity=604800

# Email Configuration
app.email.from=${APP_EMAIL_FROM:noreply@saasstarter.com}
app.email.from-name=${APP_EMAIL_FROM_NAME:SAAS Starter}
app.email.verification-base-url=${APP_EMAIL_VERIFICATION_BASE_URL:http://localhost:9090/api/v1/auth/verify-email}
app.email.password-reset-base-url=${APP_EMAIL_PASSWORD_RESET_BASE_URL:http://localhost:9090/api/v1/auth/reset-password}
app.email.enabled=${APP_EMAIL_ENABLED:true}

# SMTP (override via environment variables for real delivery)
spring.mail.host=${SPRING_MAIL_HOST:localhost}
spring.mail.port=${SPRING_MAIL_PORT:1025}
spring.mail.username=${SPRING_MAIL_USERNAME:}
spring.mail.password=${SPRING_MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=${SPRING_MAIL_SMTP_AUTH:false}
spring.mail.properties.mail.smtp.starttls.enable=${SPRING_MAIL_SMTP_TLS:false}
spring.mail.properties.mail.smtp.connectiontimeout=${SPRING_MAIL_SMTP_CONNECTION_TIMEOUT:5000}
spring.mail.properties.mail.smtp.timeout=${SPRING_MAIL_SMTP_TIMEOUT:5000}
spring.mail.properties.mail.smtp.writetimeout=${SPRING_MAIL_SMTP_WRITE_TIMEOUT:5000}

# Security Configuration
app.security.max-failed-login-attempts=5
app.security.account-lockout-duration-minutes=30
app.security.password-min-length=8
app.security.password-max-length=128
app.security.password-require-uppercase=true
app.security.password-require-lowercase=true
app.security.password-require-digit=true
app.security.password-require-special-char=true
app.security.password-history-count=5
app.security.session-timeout-minutes=30
app.security.email-verification-token-expiry-hours=24
app.security.password-reset-token-expiry-hours=1
app.security.require-email-verification-for-login=false

# Rate limiting configuration (duration in hours)
app.rate-limit.login.requests=10
app.rate-limit.login.duration=1
app.rate-limit.registration.requests=10
app.rate-limit.registration.duration=1
app.rate-limit.password-change.requests=5
app.rate-limit.password-change.duration=1
app.rate-limit.post.requests=10
app.rate-limit.post.duration=1
app.rate-limit.comment.requests=20
app.rate-limit.comment.duration=1
app.rate-limit.general.requests=50000
app.rate-limit.general.duration=1

# Role Configuration (IDs should match your database roles)
app.roles.admin-user=1
app.roles.normal-user=2

# Security event logging
logging.level.SECURITY_EVENTS=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Production logging levels (INFO for security)
# DEBUG logging is configured in application-dev.properties only
logging.level.org.springframework.security=INFO
logging.level.com.siyamuddin.blog.blogappapis.Security=INFO
logging.level.com.siyamuddin.blog.blogappapis.Services.RateLimitService=INFO
logging.level.com.siyamuddin.blog.blogappapis.Security.RateLimitInterceptor=INFO

# CORS Configuration
# Can be overridden via APP_CORS_ALLOWED_ORIGINS environment variable (comma-separated)
# For properties file, use array notation: app.cors.allowed-origins[0]=http://localhost:3000
# Default origins are configured in CorsProperties class

# Swagger/OpenAPI Configuration
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true

# Spring Boot Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.health.redis.enabled=true
management.health.db.enabled=true
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=${spring.application.name:saas-starter}
management.metrics.tags.environment=${spring.profiles.active:prod}

# File storage configuration
filestorage.mode=${FILE_STORAGE_MODE:local}
filestorage.local.base-path=${FILE_STORAGE_LOCAL_PATH:uploads}
filestorage.local.public-uri-prefix=${FILE_STORAGE_PUBLIC_PREFIX:/uploads}
filestorage.s3.bucket-name=${FILE_STORAGE_S3_BUCKET:}
filestorage.s3.region=${FILE_STORAGE_S3_REGION:}
filestorage.s3.access-key=${FILE_STORAGE_S3_ACCESS_KEY:}
filestorage.s3.secret-key=${FILE_STORAGE_S3_SECRET_KEY:}
filestorage.s3.public-base-url=${FILE_STORAGE_S3_PUBLIC_URL:}
filestorage.s3.root-folder=${FILE_STORAGE_S3_ROOT_FOLDER:uploads}
filestorage.cleanup.enabled=${FILE_STORAGE_CLEANUP_ENABLED:true}

# Multipart defaults
spring.servlet.multipart.max-file-size=${SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE:10MB}
spring.servlet.multipart.max-request-size=${SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE:10MB}

